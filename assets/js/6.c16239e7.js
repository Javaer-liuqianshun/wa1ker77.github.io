(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{166:function(t,e,s){t.exports=s.p+"assets/img/c1.2845cb2f.jpg"},167:function(t,e,s){t.exports=s.p+"assets/img/c2.368d8b77.jpg"},220:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"数据库主从一致"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库主从一致","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库主从一致")]),t._v(" "),a("h2",{attrs:{id:"主从不一致分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主从不一致分析","aria-hidden":"true"}},[t._v("#")]),t._v(" 主从不一致分析")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{height:"250px",width:"500px"},attrs:{src:s(166)}})]),t._v(" "),a("p",[t._v("如上图是最常见的数据库集群架构，"),a("strong",[t._v("一主多从，主从同步，读写分离")]),t._v("。")]),t._v(" "),a("p",[t._v("（1）一个主库提供写服务")]),t._v(" "),a("p",[t._v("（2）多个从库提供读服务，可以增加从库提升读性能")]),t._v(" "),a("p",[t._v("（3）主从之间同步数据")]),t._v(" "),a("p",[t._v("数据库主从会出现不一致问题，"),a("strong",[t._v("因为主从同步有时延，这个时延期间读从库，可能读到不一致数据")]),t._v("。")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{height:"250px",width:"500px"},attrs:{src:s(167)}})]),t._v(" "),a("p",[t._v("（1）服务发起一个写请求")]),t._v(" "),a("p",[t._v("（2）服务又发起一个读请求，此时同步未完成，读到旧数据(不一致的脏数据)")]),t._v(" "),a("p",[t._v("（3）数据库主从同步最后才完成")]),t._v(" "),a("h2",{attrs:{id:"主从不一致解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主从不一致解决方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 主从不一致解决方案")]),t._v(" "),a("p",[a("strong",[t._v("方案一：忽略")])]),t._v(" "),a("p",[t._v("如果业务能够接受，别把系统架构搞的太复杂。")]),t._v(" "),a("p",[a("strong",[t._v("方案二：强制读主")])])])}],i=s(0),r=Object(i.a)({},function(){this.$createElement;this._self._c;return this._m(0)},a,!1,null,null,null);r.options.__file="README.md";e.default=r.exports}}]);