<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用模式 | wa1ker77笔记</title>
    <meta name="description" content="在你尝试之前，你永远不知道你能做什么。">
    <link rel="icon" href="/hero.png">
    
    <link rel="preload" href="/assets/css/0.styles.347da699.css" as="style"><link rel="preload" href="/assets/js/app.05c1b046.js" as="script"><link rel="preload" href="/assets/js/19.e1513b6c.js" as="script"><link rel="prefetch" href="/assets/js/10.8220daa2.js"><link rel="prefetch" href="/assets/js/11.bd401985.js"><link rel="prefetch" href="/assets/js/12.ff7b17b7.js"><link rel="prefetch" href="/assets/js/13.a2c35f42.js"><link rel="prefetch" href="/assets/js/14.5e26248d.js"><link rel="prefetch" href="/assets/js/15.d8bad41d.js"><link rel="prefetch" href="/assets/js/16.1087d107.js"><link rel="prefetch" href="/assets/js/17.69f2e300.js"><link rel="prefetch" href="/assets/js/18.6dabcbfb.js"><link rel="prefetch" href="/assets/js/2.0829d99a.js"><link rel="prefetch" href="/assets/js/20.4c86d8a1.js"><link rel="prefetch" href="/assets/js/21.597e0b63.js"><link rel="prefetch" href="/assets/js/22.8cace07b.js"><link rel="prefetch" href="/assets/js/23.a154b9c1.js"><link rel="prefetch" href="/assets/js/24.92342fa4.js"><link rel="prefetch" href="/assets/js/25.cf4ec5aa.js"><link rel="prefetch" href="/assets/js/26.7f25323f.js"><link rel="prefetch" href="/assets/js/27.26917417.js"><link rel="prefetch" href="/assets/js/28.4f85ad18.js"><link rel="prefetch" href="/assets/js/29.4449b747.js"><link rel="prefetch" href="/assets/js/3.cbfbc2ec.js"><link rel="prefetch" href="/assets/js/30.94a28d82.js"><link rel="prefetch" href="/assets/js/31.2fb64ce8.js"><link rel="prefetch" href="/assets/js/32.272c8932.js"><link rel="prefetch" href="/assets/js/33.c9439bc1.js"><link rel="prefetch" href="/assets/js/34.dbd066fb.js"><link rel="prefetch" href="/assets/js/35.a3059914.js"><link rel="prefetch" href="/assets/js/36.d9187cf5.js"><link rel="prefetch" href="/assets/js/37.2872d3da.js"><link rel="prefetch" href="/assets/js/4.3bad2042.js"><link rel="prefetch" href="/assets/js/5.4a4e87cf.js"><link rel="prefetch" href="/assets/js/6.c16239e7.js"><link rel="prefetch" href="/assets/js/7.3e2104db.js"><link rel="prefetch" href="/assets/js/8.f78b551f.js"><link rel="prefetch" href="/assets/js/9.c14e584e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.347da699.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wa1ker77笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/rule/" class="nav-link">编程规范</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">LeetCode</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wa1ker77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/rule/" class="nav-link">编程规范</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据结构与算法</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetcode/" class="nav-link">LeetCode</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wa1ker77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="常用模式"><a href="#常用模式" aria-hidden="true" class="header-anchor">#</a> 常用模式</h1> <h2 id="proxy代理模式"><a href="#proxy代理模式" aria-hidden="true" class="header-anchor">#</a> Proxy代理模式</h2> <p><strong>总结</strong>：字节码重组</p> <blockquote><p>特点：</p> <ol><li>有两个角色：执行者、被代理人；</li> <li>对被代理人来说，这件事情是一定要做的，但是自己又不想做或者没有时间做，找代理；</li> <li>需要获取到被代理人的个人资料（执行者持有被代理对象的引用）；</li></ol> <p>现实生活案例：火车票黄牛</p> <ol><li>两个角色：黄牛和你</li> <li>被代理人要做的，自己又不想或者没时间做的事：买不到票</li> <li>执行者获取被代理人信息：黄牛需要知道你的身份证号和姓名去抢票</li></ol></blockquote> <p><strong>JDK代理原理</strong>:</p> <ol><li>拿到被代理对象的引用，然后获取它的接口</li> <li>JDK代理重新生成一个类，这个类自动继承被代理对象所继承的接口</li></ol> <blockquote><p>具体实现：在调用Proxy.newProxyInstance(ClassLoader,Interfaces,InvocationHandler)时，会生成一个新的类。假设新的类为 $Proxy0，这个类也会实现<strong>被代理对象</strong>的接口（<strong>通过反射获取</strong>），有一个参数为InvocationHandler的构造器，使用加载器把$Proxy0对象加载进JVM中，并创建代理对象（<strong>使用反射创建</strong>），最后会调用InvocationHandler的invoke()方法。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 接口
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">findLove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * zhangsan类实现Person接口
 *
 * zhangsan类是被代理对象
 *
 * 张三需要找媒婆帮忙介绍对象，因为媒婆手上有很多资源，所以张三是被代理对象，媒婆是执行者，张三需要把自己个人资料告诉媒婆（即执行者持有被代理对象的引用）
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Zhangsan</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findLove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我叫张三，性别男，我要找对象，要求是：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;白富美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;有房有车的&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;身高170cm，并且体重不超过60kg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * meipo类是执行者
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Meipo</span> implemnets InvocationHandler<span class="token punctuation">{</span>
    <span class="token comment">// 执行者需要持有被代理对象的引用</span>
    <span class="token keyword">private</span> Person target<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> Object <span class="token function">getIntance</span><span class="token punctuation">(</span>Person target<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
        Class <span class="token class-name">clazz</span> <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Proxy.newProxyInstance()会创建一个新对象（假设为$Proxy0），$Proxy0有和Zhangsan一样的接口，并实现所有方法</span>
        <span class="token comment">// 参数1（ClassLoader）会把$Proxy0加载到JVM中</span>
        <span class="token comment">// 参数2（Class&lt;?&gt;[]）取Zhangsan实现的所有接口，并让$Proxy0也实现</span>
        <span class="token comment">// 参数3（InvocationHandler）在$Proxy0中有this.h.invoke(this,m,null)的调用，this.h是InvocationHandler，其实就是Meipo类，会调用Meipo类的invoke();this是指$Proxy0；m是Method对象，Method m = Person.class.getMethod(&quot;findLove&quot;,new Class[]{})；null其实方法参数，这里findLove()是无参所以是null</span>
        <span class="token keyword">return</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>clazz<span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span>Method m<span class="token punctuation">,</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable<span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我是媒婆, 得给你找个异性谈恋爱才行.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;开始进行海选...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object invoke <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;如果合适的话,就准备办事&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> invoke<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><p><strong>CGLib代理原理</strong>：</p> <ol><li>通过生成一个被代理对象的子类，然后重写父类的方法</li> <li>生成以后的对象，可以强制转成为被代理对象（子类引用赋值给父类）</li></ol> <blockquote><p>具体实现： 核心类Enhancer，使用setSuperClass()设置父类（<strong>告诉CGLib生成的需要继承那个类</strong>），使用setCallBack()设置回调（<strong>以后调用子类时会调用MethodInterceptor类的intercept()方法</strong>），最后使用create()方法生成源代码，编译成class文件，加载到JVM中并返回子类对象。</p> <p>原理详解：CGLib是给被代理对象生成一个子类对象出来，子类重写父类的所有方法，在创建子类时，默认调用super()（<strong>OOP规定，即创建子类在调用构造器之前，会先调用父类的构造器创建出父类</strong>），把子类的引用指向父类（<strong>Java多态</strong>）。总结，就是创建了一个子类，子类重写了父类的所有方法，最终是调用子类的方法。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * zhangsan类是被代理对象
 *
 * 张三需要找媒婆帮忙介绍对象，因为媒婆手上有很多资源，所以张三是被代理对象，媒婆是执行者，张三需要把自己个人资料告诉媒婆（即执行者持有被代理对象的引用）
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Zhangsan</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">findLove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我叫张三，性别男，我要找对象，要求是：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;白富美&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;有房有车的&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;身高170cm，并且体重不超过60kg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * meipo类是执行者
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Meipo</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span><span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> Object <span class="token function">getInstance</span><span class="token punctuation">(</span>Class <span class="token class-name">clazz</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Enhancer enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置父类（这一步告诉CGLib生成的子类需要继承那个类）</span>
		enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置回调</span>
		enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 调用create()内部操作：1.生成源代码 2.编译成class文件 3.加载到JVM，并返回执行者</span>
		<span class="token keyword">return</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> Object <span class="token function">intercept</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> MethodProxy proxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;我是媒婆, 得给你找个异性谈恋爱才行.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;开始进行海选...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 这个obj的引用是由CGLib new出来的</span>
		<span class="token comment">// CGLib new出来以后的对象，是被代理对象的子类（继承了Zhangsan类）</span>
		<span class="token comment">// OOP规定，在new子类之前，实际上默认先调用了super()方法（new了子类的同时，必须先new出来父类，这就相当于间接的持有父类的引用）</span>
		<span class="token comment">// 子类重写了父类的所有方法</span>
		<span class="token comment">// 我们改变子类对象的某些对象，是可以间接的操作父类的属性</span>
		Object invoke <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;如果合适的话,就准备办事&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> invoke<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="factory工厂模式"><a href="#factory工厂模式" aria-hidden="true" class="header-anchor">#</a> Factory工厂模式</h2> <p><strong>总结</strong>：隐藏复杂的逻辑过程，只关心执行结果，产生对象。</p> <blockquote><p>简单工厂：不支持拓展增加产品</p> <p>工厂方法：支持拓展增加产品</p> <p>抽象工厂：不支持拓展增加产品，支持增加产品族</p></blockquote> <p><strong>简单工厂</strong>：简单工厂不现实，不贴切生活实际</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 汽车标准
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Car</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * 每个汽车都有品牌名称
     */</span>
    String <span class="token function">brandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 宝马
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bmw</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">brandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Bmw&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奔驰
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Benz</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">brandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Benz&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奥迪
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audi</span> <span class="token keyword">implements</span> <span class="token class-name">Car</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">brandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Audi&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 简单工厂
 *
 * 简单工厂能生产宝马车，也能生产奔驰车，还能生产奥迪车，
 * 这样的工厂太牛逼了，在现实中不存在的，
 * 所以简单工厂编写代码时一般不会使用，只是用来入门讲解工厂模式是什么
 * 
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span>String brandName<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Bmw&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bmw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Benz&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Benz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Audi&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Audi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;这个产品生产不出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> null<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><strong>工厂方法</strong>：工厂方法不止定义生产品标准（如汽车标准，品牌、价格等），还定义了工厂标准（如汽车工厂标准，汽车上路标准，尾气排放标准，电子设备安全标准等）。和简单工厂相比，多了一个工厂标准。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 汽车工厂标准
 * 
 * 包括符合汽车上路标准，尾气排放标准，电子设备安全标准，必须配备安全带、安全气囊，轮胎的耐磨程度
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FuncFactory</span><span class="token punctuation">{</span>
    Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奥迪工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AudiFactory</span> <span class="token keyword">implements</span> <span class="token class-name">FuncFactory</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Audi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奔驰工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BenzFactory</span> <span class="token keyword">implements</span> <span class="token class-name">FuncFactory</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Benz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奥迪工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BmwFactory</span> <span class="token keyword">implements</span> <span class="token class-name">FuncFactory</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bmw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 工厂方法测试
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FuncFactoryTest</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 工厂方法有个缺点：需要用户关心产品的生成商</span>
        <span class="token comment">// 增加了代码的使用复杂度</span>
        FuncFactory audiFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudiFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>audiFactory<span class="token punctuation">.</span><span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">brandName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>抽象工厂</strong>：不需要用户关心产品的生产商，只需要关心产品</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 定义一个抽象工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactroy</span><span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
    <span class="token comment">// 抽象工厂包含简单工厂，所以抽象工厂和简单工厂都不能增加产品</span>
    <span class="token comment">// 但是抽象工厂能增加产品族</span>
    <span class="token comment">// 工厂方法能增加产品，但是需要用户去知道生成产品的每个工厂，没有实现解耦</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Bmw&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bmw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Benz&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Benz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Audi&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Audi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;这个产品生产不出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> null<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奥迪工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AudiFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Audi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 宝马工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BmwFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactroy</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bmw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 奔驰工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BenzFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactroy</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Benz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 默认工厂,Spring中的抽象工厂模式都有一个默认工厂
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactory</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> AudiFactroy defaultFactroy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudiFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Car <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> defaultFactory<span class="token punctuation">.</span><span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 抽象工厂测试
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactoryTest</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        DefaultFactroy defaultFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultFactroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用默认的工厂（奥迪工厂）</span>
        defaultFactory<span class="token punctuation">.</span><span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用宝马工厂</span>
        defaultFactory<span class="token punctuation">.</span><span class="token function">getCar</span><span class="token punctuation">(</span><span class="token string">&quot;Bmw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="singleton单例模式"><a href="#singleton单例模式" aria-hidden="true" class="header-anchor">#</a> Singleton单例模式</h2> <p><strong>总结</strong>：保证从系统启动到系统停止，全过程只会产生一个实例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 懒汉式（静态内部类）实现单例
 * 这种写法，即解决安全问题，又解决了性能问题
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton1</span><span class="token punctuation">{</span>
    
    <span class="token comment">/**
     * 1、先声明一个静态内部类，private私有保证别人不能修改，static保证全局唯一性
     * 注意：静态内部类在调用时候才加载到JVM中
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">LazyHolder</span><span class="token punctuation">{</span>
        <span class="token comment">/**
         * fianl关键字防止内部误操作
         */</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton1 INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    
    <span class="token comment">/**
     * 2、将默认构造器方法私有化
     */</span>
    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 3、提供静态方法获取实例，final保证不能被覆盖
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton1 <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> LazyHolder<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">/**
 * 枚举实现单例
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton2</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * 1、将默认构造器方法私有化
     */</span>
    <span class="token keyword">private</span> <span class="token function">Singleton2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 2、提供静态方法获取实例，final保证不能被覆盖
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton2 <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> Singleton2Enum<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 3、定义内部枚举类
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">enum</span> Singlton2Enum<span class="token punctuation">{</span>
        INSTANCE<span class="token punctuation">;</span>
        
        <span class="token comment">/**
		 * 持有要创建对象的引用
		 */</span>
        <span class="token keyword">private</span> Singleton2 singleton2<span class="token punctuation">;</span>
        
        <span class="token comment">/**
         * JVM保证枚举中的构造器方法绝对只能调用一次，且在这个类初始化时调用
         */</span>
        <span class="token function">Singleton2Enum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	singleton2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
        <span class="token punctuation">}</span>
        
        <span class="token keyword">public</span> Singleton2 <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> singleton2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="delegate委派模式"><a href="#delegate委派模式" aria-hidden="true" class="header-anchor">#</a> Delegate委派模式</h2> <p><strong>总结</strong>：委派给其他人做事，不关心过程，只关心结果。</p> <blockquote><p>特点：</p> <ol><li>类似于中介功能（委托机制）；</li> <li>委托人持有受托人引用；</li> <li>不关心过程，隐藏具体逻辑，只关心结果；</li></ol></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IExector</span> <span class="token punctuation">{</span>
	<span class="token comment">/**
	 * 普通员工执行任务
	 */</span>
	<span class="token keyword">void</span> <span class="token function">doing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 受托人A
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExectorA</span> <span class="token keyword">implements</span> <span class="token class-name">IExector</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;员工A做事情...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 受托人B
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExectorB</span> <span class="token keyword">implements</span> <span class="token class-name">IExector</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;员工B做事情...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 委托人
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dispatcher</span> <span class="token punctuation">{</span>

	<span class="token comment">/**
	 * 项目经理就是受托人，他委托普通员工做工作，普通员工就是受托人
	 *
	 * 项目经理需要持有普通员工引用
	 */</span>
	<span class="token keyword">private</span> IExector exector<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token function">Dispatcher</span><span class="token punctuation">(</span>IExector exector<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>exector <span class="token operator">=</span> exector<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>exector<span class="token punctuation">.</span><span class="token function">doing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 测试
 **/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DispatcherTest</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Dispatcher dispatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dispatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExectorA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dispatcher<span class="token punctuation">.</span><span class="token function">dispather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="策略模式"><a href="#策略模式" aria-hidden="true" class="header-anchor">#</a> 策略模式</h2> <h2 id="原型模式"><a href="#原型模式" aria-hidden="true" class="header-anchor">#</a> 原型模式</h2> <h2 id="模板模式"><a href="#模板模式" aria-hidden="true" class="header-anchor">#</a> 模板模式</h2></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.05c1b046.js" defer></script><script src="/assets/js/19.e1513b6c.js" defer></script>
  </body>
</html>
